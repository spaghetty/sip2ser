\section{Installare Opsip da codice sorgente}

Considerando un sistema Centos \textsuperscript{\textregistered} 6 correttamente installato e funzionante procediamo alla installazione del prodotto.

Prima di procedere con ogni altro passo assicurarsi di aver effettuato le fasi di preinstallazione:

\subsection{configurare correttamente l'utente}

Per poter procedere \`e necessario che l'utente abbia i permessi per eseguire comandi privileggiati quindi:

abilitare il gruppo wheel per gli utenti con permessi si superadmin 

\begin{verbatim}
root$ vm /etc/sudoers trovare la linea dove parla di wheel e decommentare
\end{verbatim}

aggiungere il gruppo wheel all'utente di amministrazione 

\begin{verbatim}
usermod -G wheel -a $USER
\end{verbatim}

fare logout e rinetrare in modo che abbia effetto la modifica della lista dei gruppi

\subsection{installazione pacchetti necessari}

I prima battuta fare un completo aggiornamento del sistema

\begin{verbatim}
sudo yum update
\end{verbatim}

Installare vari pacchetti:
\begin{verbatim}
sudo yum install emacs-nox 
\end{verbatim}

\subsection{attivare servizi}
attivare sshd e named(bind)

\begin{verbatim}
$sudo yum install openssh-server bind
$sudo chkconfig sshd on
$sudo service sshd start
$sudo chkconfig named on 
$sudo service named start
\end{verbatim}

Dopo aver installato fedora nella release corretta si puo' procedere con il processo di installazione. Occorrera\` innanzitutto recuperare il codice sorgente dell'intero progetto effettuando i seguenti passi:

\subsection{retrieve codice sorgente}

Recuperare i sorgenti del progetto (questo task richiede circa 90 minuti) 

\begin{verbatim}
$git clone git://github.com/dhubler/sipxecs.git
$cd sipxecs  
$git submodule init 
$git submodule update
$git clone http://git.sip2ser.net/sip2ser
\end{verbatim}


\subsection{selezionare il giusto branch}

Bisogna fare in modo che sia i sorgenti di \textbf{sipXecs} che i sorgenti del progetto \textbf{sip2ser} siano allineati alla giusta versione.

Ad esempio per la versione 4.6 \`e necessario segiure i seguenti comandi:

\begin{verbatim}
$cd sipXecs

$git checkout release-4.6
$cd sip2ser
$git checkout opsip-release4.6
\end{verbatim}

\subsection{reperire il codice di terze parti}

\begin{verbatim} 
$git submodule init 
$git submodule update
\end{verbatim}

Il passo successivo e' quello di intallare i repository aggiuntivi per Centos:

\begin{verbatim}
$sudo yum install epel-release
\end{verbatim}

Tale step creer\`a il file \emph{/etc/yum.repo.d/epel.repo}

\subsection{preparazione dell'ammbiente di build e installazione}

Per poter effettuare una compilazione ordinata verr\`a creata una directori nel tree di sipxecs''

\begin{verbatim}
$cd sipxecs
$mkdir build
\end{verbatim}

Occorrer\`a creare la base directory per l'installazione:

\begin{verbatim}
$sudo mkdir /opt/build
$sudo chown $uSER:$USER /opt/build
\end{verbatim}

E adesso possibile lanciare i comandi per la configurazione dell'environment:

\begin{verbatim}
$cd build (spostarsi nella directory di build nel tree di sipxecs)
$../sip2ser/configure.sh 
\end{verbatim}

Adesso all'interno della directory build nel tree di sipxecs sara' presente un file ``Rakefile''. Si puo' procedere con l'inizializzazione della configurazione dell'ambiete di build:

\begin{verbatim}
$rake config (nel caso alcuni base package debbano essere installati occorre rilanciare il comando)
\end{verbatim}

Preparazione dell'ambiente di build:

\begin{verbatim}
$rake build_env  (attenzione ad immettere la password)
\end{verbatim}


\subsection{Fase di compilazione e installazione}

%%%%%%%%%%TO BE COMPLETED
%build di sipx [ make sipx ]
%per il build dei progetti interno sip2ser occorre effettuare:
%build di sipx [ make s2s ] ( build completo di tutti i progetti sip2ser )

%NB: per eventuali rpm mancanti in centos6 verificarne l'esistenza in http://repo.openfusion.net/centos6-x86_64/
%%%%%%%%%%%%%%

\section{Fasi di postinstal}

Per quanto riguarda la gestione dei servizi esterni come:

\begin{itemize}
\item DNS
\item Firewall
\item DHCP
\end{itemize}

bisogna controllare una volta attivati che non sia inserito il flag ``unmanaged'' che permette di far riferimento a servizi esterni.
Per le note su come cambiare le configurazioni di questi servizi fare riferimento alla specifica sezione del manuale utente.

